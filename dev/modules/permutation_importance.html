

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
    <title>4.2. Permutation feature importance &#8212; scikit-learn 0.22.dev0 documentation</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="../_static/css/bootstrap-responsive.css"/>

    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <script type="text/javascript" src="../_static/js/extra.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_SVG"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Visualizations" href="../visualizations.html" />
    <link rel="prev" title="4.1. Partial dependence plots" href="partial_dependence.html" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="../_static/js/bootstrap.min.js" type="text/javascript"></script>
  <script>
     VERSION_SUBDIR = (function(groups) {
         return groups ? groups[1] : null;
     })(location.href.match(/^https?:\/\/scikit-learn.org\/([^\/]+)/));
  </script>
  <link rel="canonical" href="http://scikit-learn.org/stable/modules/permutation_importance.html" />

  <script type="text/javascript">
    $("div.buttonNext, div.buttonPrevious").hover(
       function () {
           $(this).css('background-color', '#FF9C34');
       },
       function () {
           $(this).css('background-color', '#A7D6E2');
       }
    );
    function showMenu() {
      var topNav = document.getElementById("scikit-navbar");
      if (topNav.className === "navbar") {
          topNav.className += " responsive";
      } else {
          topNav.className = "navbar";
      }
    };
  </script>

  </head><body>

<div class="header-wrapper">
    <div class="header">
        <p class="logo"><a href="../index.html">
            <img src="../_static/scikit-learn-logo-small.png" alt="Logo"/>
        </a>
        </p><div class="navbar" id="scikit-navbar">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="../install.html">Installation</a></li>
                <li class="btn-li"><div class="btn-group">
              <a href="../documentation.html">Documentation</a>
              <a class="btn dropdown-toggle" data-toggle="dropdown">
                 <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
            <li class="link-title">Scikit-learn <script>document.write(DOCUMENTATION_OPTIONS.VERSION + (VERSION_SUBDIR ? " (" + VERSION_SUBDIR + ")" : ""));</script></li>
            <li><a href="../tutorial/index.html">Tutorials</a></li>
            <li><a href="../user_guide.html">User guide</a></li>
            <li><a href="classes.html">API</a></li>
            <li><a href="../glossary.html">Glossary</a></li>
            <li><a href="../faq.html">FAQ</a></li>
            <li><a href="../developers/index.html">Development</a></li>
            <li><a href="../roadmap.html">Roadmap</a></li>
            <li><a href="../about.html">About us</a></li>
            <li class="divider"></li>
                <script>if (VERSION_SUBDIR != "stable") document.write('<li><a href="http://scikit-learn.org/stable/documentation.html">Stable version</a></li>')</script>
                <script>if (VERSION_SUBDIR != "dev") document.write('<li><a href="http://scikit-learn.org/dev/documentation.html">Development version</a></li>')</script>
                <li><a href="http://scikit-learn.org/dev/versions.html">All available versions</a></li>
                <li><a href="../_downloads/scikit-learn-docs.pdf">PDF documentation</a></li>
              </ul>
            </div>
        </li>
            <li><a href="../auto_examples/index.html">Examples</a></li>
            </ul>
            <a href="javascript:void(0);" onclick="showMenu()">
                <div class="nav-icon">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>
            </a>
            <div class="search_form">
                <div class="gcse-search" id="cse" style="width: 100%;"></div>
            </div>
        </div> <!-- end navbar --></div>
</div>


<!-- GitHub "fork me" ribbon -->
<a href="https://github.com/scikit-learn/scikit-learn">
  <img class="fork-me"
       style="position: absolute; top: 0; right: 0; border: 0;"
       src="../_static/img/forkme.png"
       alt="Fork me on GitHub" />
</a>

<div class="content-wrapper">
    <div class="sphinxsidebar">
    <div class="sphinxsidebarwrapper">
        <div class="rel">
    
        <div class="rellink">
        <a href="partial_dependence.html"
        accesskey="P">Previous
        <br/>
        <span class="smallrellink">
        4.1. Partial ...
        </span>
            <span class="hiddenrellink">
            4.1. Partial dependence plots
            </span>
        </a>
        </div>
            <div class="spacer">
            &nbsp;
            </div>
        <div class="rellink">
        <a href="../visualizations.html"
        accesskey="N">Next
        <br/>
        <span class="smallrellink">
        5. Visualizations
        </span>
            <span class="hiddenrellink">
            5. Visualizations
            </span>
        </a>
        </div>

    <!-- Ad a link to the 'up' page -->
        <div class="spacer">
        &nbsp;
        </div>
        <div class="rellink">
        <a href="../inspection.html">
        Up
        <br/>
        <span class="smallrellink">
        4. Inspection
        </span>
            <span class="hiddenrellink">
            4. Inspection
            </span>
            
        </a>
        </div>
    </div>
    
      <p class="doc-version"><b>scikit-learn v0.22.dev0</b><br/>
      <a href="http://scikit-learn.org/dev/versions.html">Other versions</a></p>
    <p class="citing">Please <b><a href="../about.html#citing-scikit-learn" style="font-size: 110%;">cite us </a></b>if you use the software.</p>
    <ul>
<li><a class="reference internal" href="#">4.2. Permutation feature importance</a><ul>
<li><a class="reference internal" href="#relation-to-impurity-based-importance-in-trees">4.2.1. Relation to impurity-based importance in trees</a></li>
<li><a class="reference internal" href="#strongly-correlated-features">4.2.2. Strongly correlated features</a></li>
</ul>
</li>
</ul>

    </div>
</div>

<input type="checkbox" id="nav-trigger" class="nav-trigger" checked />
<label for="nav-trigger"></label>




      <div class="content">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="permutation-feature-importance">
<span id="permutation-importance"></span><h1>4.2. Permutation feature importance<a class="headerlink" href="#permutation-feature-importance" title="Permalink to this headline">Â¶</a></h1>
<p>Permutation feature importance is a model inspection technique that can be used
for any <a class="reference internal" href="../glossary.html#term-fitted"><span class="xref std std-term">fitted</span></a> <a class="reference internal" href="../glossary.html#term-estimator"><span class="xref std std-term">estimator</span></a> when the data is rectangular. This is
especially useful for non-linear or opaque <a class="reference internal" href="../glossary.html#term-estimators"><span class="xref std std-term">estimators</span></a>. The permutation
feature importance is defined to be the decrease in a model score when a single
feature value is randomly shuffled <a class="footnote-reference brackets" href="#id2" id="id1">1</a>. This procedure breaks the relationship
between the feature and the target, thus the drop in the model score is
indicative of how much the model depends on the feature. This technique
benefits from being model agnostic and can be calculated many times with
different permutations of the feature.</p>
<p>The <a class="reference internal" href="generated/sklearn.inspection.permutation_importance.html#sklearn.inspection.permutation_importance" title="sklearn.inspection.permutation_importance"><code class="xref py py-func docutils literal notranslate"><span class="pre">permutation_importance</span></code></a> function calculates the feature importance
of <a class="reference internal" href="../glossary.html#term-estimators"><span class="xref std std-term">estimators</span></a> for a given dataset. The <code class="docutils literal notranslate"><span class="pre">n_repeats</span></code> parameter sets the
number of times a feature is randomly shuffled and returns a sample of feature
importances. Permutation importances can either be computed on the training set
or an held-out testing or validation set. Using a held-out set makes it
possible to highlight which features contribute the most to the generalization
power of the inspected model. Features that are important on the training set
but not on the held-out set might cause the model to overfit.</p>
<p>Note that features that are deemed non-important for some model with a
low predictive performance could be highly predictive for a model that
generalizes better. The conclusions should always be drawn in the context of
the specific model under inspection and cannot be automatically generalized to
the intrinsic predictive value of the features by them-selves. Therefore it is
always important to evaluate the predictive power of a model using a held-out
set (or better with cross-validation) prior to computing importances.</p>
<div class="section" id="relation-to-impurity-based-importance-in-trees">
<h2>4.2.1. Relation to impurity-based importance in trees<a class="headerlink" href="#relation-to-impurity-based-importance-in-trees" title="Permalink to this headline">Â¶</a></h2>
<p>Tree based models provides a different measure of feature importances based
on the mean decrease in impurity (MDI, the splitting criterion). This gives
importance to features that may not be predictive on unseen data. The
permutation feature importance avoids this issue, since it can be applied to
unseen data. Furthermore, impurity-based feature importance for trees
are strongly biased and favor high cardinality features
(typically numerical features). Permutation-based feature importances do not
exhibit such a bias. Additionally, the permutation feature importance may use
an arbitrary metric on the treeâs predictions. These two methods of obtaining
feature importance are explored in:
<a class="reference internal" href="../auto_examples/inspection/plot_permutation_importance.html#sphx-glr-auto-examples-inspection-plot-permutation-importance-py"><span class="std std-ref">Permutation Importance vs Random Forest Feature Importance (MDI)</span></a>.</p>
</div>
<div class="section" id="strongly-correlated-features">
<h2>4.2.2. Strongly correlated features<a class="headerlink" href="#strongly-correlated-features" title="Permalink to this headline">Â¶</a></h2>
<p>When two features are correlated and one of the features is permuted, the model
will still have access to the feature through its correlated feature. This will
result in a lower importance for both features, where they might <em>actually</em> be
important. One way  to handle this is to cluster features that are correlated
and only keep one feature from each cluster. This use case is explored in:
<a class="reference internal" href="../auto_examples/inspection/plot_permutation_importance_multicollinear.html#sphx-glr-auto-examples-inspection-plot-permutation-importance-multicollinear-py"><span class="std std-ref">Permutation Importance with Multicollinear or Correlated Features</span></a>.</p>
<div class="topic">
<p class="topic-title first">Examples:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../auto_examples/inspection/plot_permutation_importance.html#sphx-glr-auto-examples-inspection-plot-permutation-importance-py"><span class="std std-ref">Permutation Importance vs Random Forest Feature Importance (MDI)</span></a></p></li>
<li><p><a class="reference internal" href="../auto_examples/inspection/plot_permutation_importance_multicollinear.html#sphx-glr-auto-examples-inspection-plot-permutation-importance-multicollinear-py"><span class="std std-ref">Permutation Importance with Multicollinear or Correlated Features</span></a></p></li>
</ul>
</div>
<div class="topic">
<p class="topic-title first">References:</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>L. Breiman, âRandom Forestsâ, Machine Learning, 45(1), 5-32,
2001. <a class="reference external" href="https://doi.org/10.1023/A:1010933404324">https://doi.org/10.1023/A:1010933404324</a></p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer">
        &copy; 2007 - 2019, scikit-learn developers (BSD License).
      <a href="../_sources/modules/permutation_importance.rst.txt" rel="nofollow">Show this page source</a>
    </div>
     <div class="rel">
    
    <div class="buttonPrevious">
      <a href="partial_dependence.html">Previous
      </a>
    </div>
    <div class="buttonNext">
      <a href="../visualizations.html">Next
      </a>
    </div>
    
     </div>

    
    <script>
        window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
        ga('create', 'UA-22606712-2', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    
    <script>
      (function() {
        var cx = '016639176250731907682:tjtqbvtvij0';
        var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
        gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <script src="https://scikit-learn.org/versionwarning.js"></script>
  </body>
</html>